language: python
python:
  - "3.6"
sudo: false

branches:
  only:
    - master

env:
  global:
    - TWINE_USERNAME=XxX

matrix:
  include:
    - python: 3.5
      env: TOXENV=py35
    - python: 3.6
      env: TOXENV=py36
    - python: 3.7
      env: TOXENV=py37
      dist: xenial
    - python: 3.6
      env: TOXENV=docu

  script:
    - tox
    - |
      if [[ $TRAVIS_TAG ]]; then
        # upload package to pypi
        python setup.py sdist
        python setup.py bdist_wheel --universal
        pip install twine
        twine upload dist/*
        # upload docu
      fi
